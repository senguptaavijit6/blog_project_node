<link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
<%- include("../../common/head.ejs") %>

<style>
	:root {
		--primary: #3a5a40;
		--secondary: #588157;
		--light: #f8f9fa;
		--dark: #212529;
		--accent: #dad7cd;
	}

	body {
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
		background-color: var(--light);
	}

	/* .navbar {
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
	}

	.navbar-brand {
		font-weight: 700;
		color: var(--primary) !important;
	}

	.nav-link {
		font-weight: 500;
		color: var(--dark) !important;
		transition: color 0.3s;
	}

	.nav-link:hover {
		color: var(--primary) !important;
	} */

	.card {
		overflow: hidden;
	}

	.card-horizontal {
		display: flex;
		flex-direction: row;
		height: 100%;
	}

	.card-img-left {
		width: 180px;
		object-fit: cover;
		object-position: center;
		height: 100%;
	}

	.main-heading {
		font-size: 3.2rem;
		font-weight: 800;
		margin-bottom: 15px;
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
		animation: fadeInUp 0.8s;
	}

	.sub-heading {
		font-size: 2.2rem;
		font-weight: 700;
		margin-bottom: 20px;
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
		animation: fadeInUp 1s;
	}

	.regular-heading {
		font-size: 1.4rem;
		font-weight: 400;
		max-width: 600px;
		margin-bottom: 30px;
		text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
		animation: fadeInUp 1.2s;
	}

	@media (max-width: 767px) {
		.card-horizontal {
			flex-direction: column;
		}

		.card-img-left {
			width: 100%;
			height: 200px;
		}
	}

	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translate3d(0, 40px, 0);
		}

		to {
			opacity: 1;
			transform: translate3d(0, 0, 0);
		}
	}

	@media (max-width: 992px) {
		.main-heading {
			font-size: 2.6rem;
		}

		.sub-heading {
			font-size: 1.8rem;
		}
	}

	@media (max-width: 768px) {
		.carousel-item {
			height: 450px;
		}

		.main-heading {
			font-size: 2.2rem;
		}

		.sub-heading {
			font-size: 1.5rem;
		}

		.regular-heading {
			font-size: 1.2rem;
		}
	}

	.hero {
		padding: 6rem 0;
		background-color: #f7f7f7;
		border-radius: 0 0 20px 20px;
		margin-bottom: 4rem;
	}

	.hero h1 {
		color: var(--primary);
	}

	.btn-primary {
		background-color: var(--primary);
		border-color: var(--primary);
		border-radius: 30px;
		padding: 0.8rem 1.8rem;
		font-weight: 600;
	}

	.btn-primary:hover,
	.btn-primary:focus {
		background-color: var(--secondary);
		border-color: var(--secondary);
		transform: translateY(-2px);
	}

	.section-title {
		color: var(--primary);
		position: relative;
		padding-bottom: 1rem;
	}

	.section-title::after {
		content: "";
		position: absolute;
		bottom: 0;
		left: 50%;
		transform: translateX(-50%);
		width: 50px;
		height: 3px;
		background-color: var(--secondary);
	}

	.card {
		border: none;
		border-radius: 10px;
		overflow: hidden;
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
		transition: transform 0.3s;
		height: 100%;
	}

	.card:hover {
		transform: translateY(-5px);
	}

	.card-img-top {
		height: 200px;
		object-fit: cover;
	}

	.category-badge {
		background-color: var(--accent);
		color: var(--primary);
		font-size: 0.8rem;
	}

	.author-img {
		width: 30px;
		height: 30px;
	}

	.categories {
		background-color: #f7f7f7;
		border-radius: 20px;
		padding: 4rem 0;
	}

	.category-card {
		background-color: white;
		border-radius: 10px;
		padding: 1.5rem;
		text-align: center;
		box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03);
		transition: transform 0.3s;
		height: 100%;
	}

	.category-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 8px 15px rgba(0, 0, 0, 0.05);
	}

	.category-icon {
		font-size: 2rem;
		margin-bottom: 1rem;
		color: var(--primary);
	}

	.footer {
		background-color: var(--dark);
		color: white;
		padding: 4rem 0 2rem;
	}

	.footer h5 {
		color: var(--accent);
		margin-bottom: 1.5rem;
	}

	.footer-links {
		list-style: none;
		padding-left: 0;
	}

	.footer-links li {
		margin-bottom: 0.8rem;
	}

	.footer-links a {
		color: #aaa;
		text-decoration: none;
		transition: color 0.3s;
	}

	.footer-links a:hover {
		color: white;
	}

	.social-links a {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		background-color: rgba(255, 255, 255, 0.1);
		border-radius: 50%;
		color: white;
		margin-right: 0.5rem;
		transition: background-color 0.3s;
	}

	.social-links a:hover {
		background-color: var(--primary);
		text-decoration: none;
	}

	.copyright {
		border-top: 1px solid rgba(255, 255, 255, 0.1);
		padding-top: 2rem;
		color: #aaa;
	}
</style>

<body class="sb-nav-fixed">
	<nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
		<!-- Navbar Brand-->
		<a class="navbar-brand ps-3" href="/"><%= siteName %></a>
		<!-- Sidebar Toggle-->
		<button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
		<!-- Navbar Search-->
		<form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
			<!-- <div class="input-group">
				<input class="form-control" type="text" placeholder="Search for blogs" aria-label="Search for blogs" aria-describedby="btnNavbarSearch" />
				<button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
			</div> -->
		</form>
		<!-- Navbar-->
		<ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><img src="/assets/img/avatars/<%= user.avatar %>.png" alt="user-avatar" style="width: 30px; height: 30px; object-fit: cover; border-radius: 100px;"></a>
				<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
					<li><a class="dropdown-item" href="/settings/">Settings</a></li>
					<li><a class="dropdown-item" href="#!">Activity Log</a></li>
					<li>
						<hr class="dropdown-divider" />
					</li>
					<li><a class="dropdown-item" href="/logout">Logout</a></li>
				</ul>
			</li>
		</ul>
	</nav>
	<div id="layoutSidenav">
		<div id="layoutSidenav_nav">
			<nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
				<div class="sb-sidenav-menu">
					<div class="nav">
						<div class="sb-sidenav-menu-heading">Core</div>
						<a class="nav-link" href="/dashboard">
							<div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
							Dashboard
						</a>
						<div class="sb-sidenav-menu-heading">Pages</div>
						<!-- <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
							<div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
							CMS Management
							<div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
						</a>
						<div class="collapse" id="collapseLayouts" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
							<nav class="sb-sidenav-menu-nested nav">
								<a class="nav-link" href="/admin/cms/generalCMSPage">General</a>
								<a class="nav-link" href="/admin/cms/homeCMSPage">Home</a>
								<a class="nav-link" href="/admin/cms/aboutUsCMSPage">About Us</a>
							</nav>
						</div> -->

						<a class="nav-link active bg-success" href="/getUserComments">
							<div class="sb-nav-link-icon"><i class="fa-solid fa-comment-dots"></i></div>
							My Comments
						</a>
						<a class="nav-link" href="/getUserLikes">
							<div class="sb-nav-link-icon"><i class="fa-solid fa-heart"></i></div>
							My Likes
						</a>
						<a class="nav-link" href="/getUserDislikes">
							<div class="sb-nav-link-icon"><i class="fa-solid fa-thumbs-down"></i></div>
							My Dislikes
						</a>


						<!-- <a class="nav-link" href="/notificationsPage">
							<div class="sb-nav-link-icon"><i class="fa-solid fa-bell"></i></div>
							Notifications
						</a> -->

						<!-- <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                                    data-bs-target="#collapsePages" aria-expanded="false" aria-controls="collapsePages">
                                    <div class="sb-nav-link-icon"><i class="fas fa-book-open"></i></div>
                                    Pages
                                    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                                </a>
                                <div class="collapse" id="collapsePages" aria-labelledby="headingTwo"
                                    data-bs-parent="#sidenavAccordion">
                                    <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                                            data-bs-target="#pagesCollapseAuth" aria-expanded="false"
                                            aria-controls="pagesCollapseAuth">
                                            Authentication
                                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i>
                                            </div>
                                        </a>
                                        <div class="collapse" id="pagesCollapseAuth" aria-labelledby="headingOne"
                                            data-bs-parent="#sidenavAccordionPages">
                                            <nav class="sb-sidenav-menu-nested nav">
                                                <a class="nav-link" href="login.html">Login</a>
                                                <a class="nav-link" href="register.html">Register</a>
                                                <a class="nav-link" href="password.html">Forgot Password</a>
                                            </nav>
                                        </div>
                                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                                            data-bs-target="#pagesCollapseError" aria-expanded="false"
                                            aria-controls="pagesCollapseError">
                                            Error
                                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i>
                                            </div>
                                        </a>
                                        <div class="collapse" id="pagesCollapseError" aria-labelledby="headingOne"
                                            data-bs-parent="#sidenavAccordionPages">
                                            <nav class="sb-sidenav-menu-nested nav">
                                                <a class="nav-link" href="401.html">401 Page</a>
                                                <a class="nav-link" href="404.html">404 Page</a>
                                                <a class="nav-link" href="500.html">500 Page</a>
                                            </nav>
                                        </div>
                                    </nav>
                                </div>
                                <div class="sb-sidenav-menu-heading">Addons</div>
                                <a class="nav-link" href="charts.html">
                                    <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                                    Charts
                                </a>
                                <a class="nav-link" href="tables.html">
                                    <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                                    Tables
                                </a> -->
					</div>
				</div>
				<div class="sb-sidenav-footer">
					<div class="small">Logged in as: <%= user.role %></div>
					<%= user.firstName + " " + user.lastName %>
				</div>
			</nav>
		</div>
		<div id="layoutSidenav_content">
			<main>
				<%- include("../../common/alerts.ejs") %>
				<div class="container-fluid p-4">
					<!-- Card List -->
                    <div class="row mb-4">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <h1 class="main-heading">Comments</h1>
                            <p class="regular-heading">Here you can find all your commented blogs.</p>
                        </div>
                    </div>
                    <% if (comments.length > 0) { %>
                    <div class="row mb-4">
                        <% comments.map(comment => { %>
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-horizontal">
                                        <img src="/uploads/blog_image/<%= comment.blogDetails.image %>" alt="Card image" class="card-img-left">
                                        <div class="card-body">
                                            <h5 class="card-title"><%= comment.blogDetails.title %></h5>
                                            <!-- <h6 class="card-subtitle mb-2 text-muted">Subtitle</h6> -->
                                            <p class="card-text">
                                                <% const processedContent = comment.blogDetails.content.replace(/<img[^>]*>/g, '').replace(/<\/?[^>]+(>|$)/g, '') %>
                                                <%- processedContent.length > 50 ? `${processedContent.slice(0, 50)}...` : processedContent %>
                                            </p>
                                            <% comment.blogDetails.categoryDetails.map(category => { %>
                                                <span class="badge category-badge mb-2">
                                                    <%= category.name %>
                                                </span>
                                            <% }) %>
                                            <div class="d-flex align-items-center mt-3">
                                                <img src="/assets/img/avatars/<%= comment.blogDetails.authorDetails.avatar %>.png" class="rounded-circle author-img me-2" alt="Author">
                                                <% let months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] %>
                                                <small class="text-muted"><%= `${comment.blogDetails.authorDetails.firstName} ${comment.blogDetails.authorDetails.lastName} • ${months[comment.blogDetails.publishAt.getMonth()]} ${comment.blogDetails.publishAt.getDate()}, ${comment.blogDetails.publishAt.getFullYear()}`  %></small>
                                            </div>
                                            <a class="btn btn-link" style="margin-left: -10px; margin-top: 10px;" href="/blogDetails/<%= comment.blogDetails._id %>">Read More</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    </div>
                    <% } else { %>
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="alert alert-info" role="alert">
                                    No comments found.
                                </div>
                            </div>
                        </div>
                    <% } %>
                    <!-- End Card List -->                        

				</div>
			</main>
			<%- include("../../common/footer.ejs") %>

		</div>
		<%- include("../../common/scripts.ejs") %>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
		<script src="/assets/demo/chart-area-demo.js"></script>
		<script src="/assets/demo/chart-bar-demo.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
		<script src="/js/datatables-simple-demo.js"></script>

</body>

</html>